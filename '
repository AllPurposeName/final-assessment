require "test_helper"

class MatchSuggestionTest < ActiveSupport::TestCase

  def test_it_shows_pending_users_first
    login_user
    all_user = User.find_by(name: "AllPurposeName")
    user = User.find_by(name: "worace")
    user.pairs << User.all
    binding.pry
    user.pairings.where(pair_id: all_user.id).first.mark_as_interested
    user.save
    find_pairs



    within("#name") do
      assert page.has_content?("worace"), "worace should be the first user displayed because he marked the current_user as interested"
    end

    within(".buttons") do
      assert page.has_button?("Approve!"), "a button for approve should show up"
      assert page.has_button?("Reject!"), "a button for reject should show up"
    end
  end

  def find_pairs
    visit "/"
    click_link("Login with GitHub")
    fill_in_description
    click_link("Find Pairs!")
  end

  def fill_in_description
    within("#information") do
      check("information[JavaScript]")
      check("information[Ruby]")
      check("information[Clojure]")
      click_button("Save Information")
    end
  end
end
